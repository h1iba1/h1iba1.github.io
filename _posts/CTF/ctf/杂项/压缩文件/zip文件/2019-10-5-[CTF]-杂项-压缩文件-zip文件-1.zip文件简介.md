## zip格式由Phil Katz（菲尔.卡茨）发明，所以zip文件的前两个字母就用了PK。

列：

![](https://raw.githubusercontent.com/h1iba1/h1iba1.github.io/refs/heads/master/_posts/CTF/ctf/杂项/压缩文件/zip文件/images/090D092066594ED6981CCFBA5C7FEAF8clipboard.png)



# 文件格式：



zip文件由多个文件实体和目录源数据以及一个目录结束标识组成。

比如使用010editer打开实验吧第二个隐写里的zip文件：

![](https://raw.githubusercontent.com/h1iba1/h1iba1.github.io/refs/heads/master/_posts/CTF/ctf/杂项/压缩文件/zip文件/images/8A3F0F42E65544799AB170BC5C070665clipboard.png)

## 发现有三个部分：

### 第一部分为：文件实体

主要是记录文件压缩后的主要内容通常以504b0304标识开头，每一被压缩的文件对应一个文件实体。例如本次压缩的flag.txt对应第一个文件实体（红色的部分）。文件实体中存储着当前被压缩文件的名字，文件修改时间，压缩方式，是否加密等信息。从旁边解码中我们也能看到，文件的名字flag.txt,以及文件的内容为：加密的§ ›¦¼7!ç°§´â"¹C1»Ä37ý·µm¡üðéÉV



### 第二部分为：目录源数据

主要记录文件目录相关信息，如文件注释，大小，文件名...。由文件头组成，通常是以504b0102标识开头。

该部分存在伪加密标识符：

50 4B 01 02 3F00 0A00 00 00（此处的00 00改为0900打开即可实现加密）



### 第三部分：目录源数据结束标识

主要记录压缩包开始分卷号开始的偏移量，主要决定文件的目录结构，以及压缩包的相关信息，以504b0506开头。

并且他们是有对应关系的，压缩包中的一个文件实体对应一个文件头。



## 压缩包各部分详细介绍

https://xz.aliyun.com/t/3994#toc-2

